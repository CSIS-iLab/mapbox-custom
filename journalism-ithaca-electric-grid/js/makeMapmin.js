function asyncGeneratorStep(e,t,r,o,n,a,s){try{var i=e[a](s),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(o,n){var a=e.apply(t,r);function s(e){asyncGeneratorStep(a,o,n,s,i,"next",e)}function i(e){asyncGeneratorStep(a,o,n,s,i,"throw",e)}s(void 0)})}}function _typeof2(e){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)})(e)}if("function"!=typeof window.CustomEvent){var CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r};CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent}var url=window.location!=window.parent.location?document.referrer:document.location.href,href=/lang=([^&]+)/.exec(url),lang=href?href[1]:null,mapId=0;function CustomMap(e,t){this.id=mapId++,this.filters=[],this.groups=[],this.json=[],this.leaflet;var r=this;Object.keys(t).forEach(function(e){r[e.toLowerCase().replace(/ /g,"")]=t[e]}),r.popupcontent=r.popupcontent&&"string"==typeof r.popupcontent?r.popupcontent.split(","):r.popupcontent&&"object"===_typeof(r.popupcontent)?r.popupcontent:[],r.popupheaders=r.popupheaders&&"string"==typeof r.popupheaders?r.popupheaders.split(","):r.popupheaders&&"object"===_typeof(r.popupheaders)?r.popupheaders:[],CustomMap.all=CustomMap.all||[],CustomMap.all.push(this),r.resetFilters=function(){r.filters=[]},r.removeGroups=function(){r.groups.forEach(function(e){r.leaflet.removeLayer(e)}),r.groups=[]},this.render=function(){return r.leaflet=L.map(e,{minZoom:r.minzoom||null,maxZoom:r.maxzoom||20,maxBounds:r.maxbounds||[r.swbounds,r.nebounds],scrollWheelZoom:!(window.innerWidth<768),zoomControl:!(!r.hasOwnProperty("zoomslider")||r.zoomslider),attributionControl:!1}),r.loadEvent&&r.leaflet.on("load",r.loadevent),r.addEvent&&r.leaflet.on("layeradd",r.addevent),this.leaflet.setView(r.center,r.zoom||2),L.tileLayer("https://api.mapbox.com/styles/v1/ilabmedia/"+r.mapboxstyle+"/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiaWxhYm1lZGlhIiwiYSI6ImNpbHYycXZ2bTAxajZ1c2tzdWU1b3gydnYifQ.AHxl8pPZsjsqoz95-604nw",{}).addTo(r.leaflet),r.hasOwnProperty("zoomslider")&&!r.zoomslider||L.control.zoomslider().addTo(r.leaflet),r.hasOwnProperty("fullscreen")&&!r.fullscreen||(window.fullscreen=new L.Control.Fullscreen,r.leaflet.addControl(window.fullscreen)),L.control.attribution({position:"bottomleft"}).setPrefix(r.attribution).addTo(r.leaflet),r.resetFilters(),r}}var leafletLoaded=0,primaryJsFiles=["https://unpkg.com/leaflet@1.3.1/dist/leaflet.js","https://unpkg.com/whatwg-fetch@3.0.0/dist/fetch.umd.js"],secondaryJsFiles=["https://unpkg.com/leaflet.zoomslider@0.7.1/src/L.Control.Zoomslider.js","https://unpkg.com/leaflet-fullscreen@1.0.2/dist/Leaflet.fullscreen.min.js","https://unpkg.com/chroma-js@2.0.3/chroma.min.js","https://csis-ilab.github.io/map-templates/dist/js/vendor/A11y-Dialog.js","https://unpkg.com/choices.js@7.0.0/public/assets/scripts/choices.min.js","https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js","https://csis-ilab.github.io/map-templates/dist/js/vendor/patterns.js","https://csis-ilab.github.io/map-templates/dist/js/vendor/latinize.js"];function handleLoadLeaflet(){return new Promise(function(e,t){secondaryJsFiles.forEach(function(t){var r=document.head,o=document.createElement("script");o.src=t,r.appendChild(o),o.onload=function(){if(++leafletLoaded===secondaryJsFiles.length+primaryJsFiles.length)return e(leafletLoaded),leafletLoaded}})})}function importFiles(){return _importFiles.apply(this,arguments)}function _importFiles(){return(_importFiles=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){["https://fonts.googleapis.com/css?family=Open+Sans:300,400,600","https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700","https://csis-ilab.github.io/map-templates/dist/css/vendor.css","https://csis-ilab.github.io/map-templates/dist/css/style.css"].forEach(function(e){var t=document.head,r=document.createElement("link");r.rel="stylesheet",r.href=e,t.insertBefore(r,Array.from(t.childNodes)[0])}),primaryJsFiles.forEach(function(t){var r=document.head,o=document.createElement("script");o.src=t,o.onload=function(){if(++leafletLoaded===primaryJsFiles.length)return handleLoadLeaflet(),e(leafletLoaded),leafletLoaded},r.appendChild(o)})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function makeMap(e){return _makeMap.apply(this,arguments)}function _makeMap(){return(_makeMap=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(leafletLoaded){e.next=6;break}return e.next=3,importFiles().then(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,init(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 6:return e.next=8,init(t);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function init(e){return _init.apply(this,arguments)}function _init(){return(_init=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r="https://spreadsheets.google.com/feeds/list/",window.defaultColor=t.oceancolor||t.oceanColor||t["ocean color"],!lang){e.next=6;break}fetch(r+t.googleSheet+"/3/public/values?alt=json").then(function(e){return e.json()}).then(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=parseLanguageData(n.feed.entry),e.next=3,initWithSpreadsheet(r,t,o);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=15;break;case 6:if(!t.googleSheet){e.next=12;break}return e.next=9,initWithSpreadsheet(r,t);case 9:return e.abrupt("return",e.sent);case 12:return e.next=14,initWithoutSpreadsheet(t);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function initWithoutSpreadsheet(e,t){return _initWithoutSpreadsheet.apply(this,arguments)}function _initWithoutSpreadsheet(){return(_initWithoutSpreadsheet=_asyncToGenerator(regeneratorRuntime.mark(function e(t,r){var o,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.slug=t.mapID.toLowerCase().replace(/ /g,"-"),t.translations=r,makeNodes(t),o=document.querySelector("#"+t.slug+"__map.map"),!t.formatToolbox){e.next=9;break}return n=new CustomMap(o,t).render(),e.abrupt("return",new Promise(function(e,r){return fetch("https://csis.carto.com/api/v2/sql?api_key="+n.apikey+"&format=geojson&q=SELECT%20*%20FROM%20"+n.table).then(function(e){return e.json()}).then(function(r){n.json=[r];var o=document.querySelector("#"+t.slug+" #controls");n.formatToolbox(o),makeGroups(n),e(n)})}));case 9:return e.abrupt("return",new Promise(function(e,r){return fetch("https://csis.carto.com/api/v2/sql?api_key="+(t.apikey||t.apiKey||t["api key"])+"&format=geojson&q=SELECT%20*%20FROM%20"+t.table).then(function(e){return e.json()}).then(function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function r(n){var a,s,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t.json=[n],document.querySelector("#"+t.slug+" #controls"),"",!t.widgets){r.next=9;break}return r.next=6,makeWidgets(null,t,"");case 6:a=r.sent,r.next=13;break;case 9:makeGroups(a=new CustomMap(o,t).render()),document.querySelector("#"+t.slug+" #controls").innerHTML="";case 13:t.footer&&t.footer.trim()&&((s=document.createElement("footer")).innerHTML=t.footer+'  <div class="hidden"></div>',(i=document.querySelector("#"+t.slug+" #controls")||document.querySelector("#"+t.slug+"header")).parentNode.insertBefore(s,i.nextSibling)),e(a);case 15:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}())}));case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function initWithSpreadsheet(e,t,r){return _initWithSpreadsheet.apply(this,arguments)}function _initWithSpreadsheet(){return(_initWithSpreadsheet=_asyncToGenerator(regeneratorRuntime.mark(function e(t,r,o){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,a){return fetch(t+r.googleSheet+"/2/public/values?alt=json").then(function(e){return e.json()}).then(function(a){var s=parseMetaData(a.feed.entry),i=getWidgets(s),l={};if(Object.keys(s).forEach(function(e){l[e]=s[e]}),Object.keys(r).forEach(function(e){l[e]=r[e]}),l.center="string"==typeof l.center?l.center.split(","):l.center?l.center:[0,0],l.swbounds="string"==typeof l.swbounds?l.swbounds.split(","):l.swbounds?l.swbounds:[-90,-180],l.nebounds="string"==typeof l.nebounds?l.nebounds.split(","):l.nebounds?l.nebounds:[90,180],l.slug=l.mapID.toLowerCase().replace(/ /g,"-"),l.translations=o,l.widgets=i,makeNodes(l),i.filter(function(e){return e.reference})){var c=i.map(function(e){if(e.reference)return t+r.googleSheet+"/"+e.reference+"/public/values?alt=json"}).filter(function(e){return e});Promise.all(c.map(function(e){return fetch(e)})).then(function(e){return Promise.all(e.map(function(e){return e.json()}))}).then(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(r){var o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,makeWidgets(r,l,"");case 2:n=t.sent,l.footer&&l.footer.trim()&&((o=document.createElement("footer")).innerHTML=l.footer+'  <div class="hidden"></div>',(a=document.querySelector("#"+l.slug+" #controls")||document.querySelector("#"+l.slug+"header")).parentNode.insertBefore(o,a.nextSibling)),e(n);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}else e(n)})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function getWidgets(e){var t=[];var r=["input","field","grouping","instructions","maximum","type","reference","style"];return Object.keys(e).filter(function(e){return e.toLowerCase().indexOf("widget")>-1}).forEach(function(o){var n=o.match(/\d+/)[0];t[n-1]=t[n-1]||{},r.forEach(function(r){!function(r,o,n){r.toLowerCase().indexOf(n)>-1&&(t[o-1][n]=convertType(e[r]))}(o,n,r)})}),t.forEach(function(e,t){e.field=e.field.replace(/ /g,"_"),e.id=t}),t}function makeNodes(e){var t="";if(t+='<section id="'+e.slug+'">',t+='<div id="'+e.slug+'__map" class="map"></div>',t+='<aside class="toolbox">',t+=e.title?'<input type="checkbox" checked class="ui mobile-only"><div class="hamburger mobile-only"><div class="icon"> <span></span> <span></span> <span></span></div><div class="menu translate"></div></div>':"",t+='<div class="box">',t+=e.title||e.logo||e.description?'<header  class="translate"> <h1><a target="_blank" id="logo"></a></h1>  <p class="translate"></p></header>':"",t+=(e.instructions?'<p class="translate">'+e.instructions+"</p>":"")+'<div id="controls"><div class="loader"></div></div><footer><div class="hidden"></div></footer></div></aside>',t+=e.titlecardcontent?'<button id="'+e.slug+'__about" class="about-trigger">ABOUT THIS MAP</button>':"",t+="</section>",document.body.innerHTML+=t,e.titlecardcontent){var r="";r+='<div class="dialog" id="'+e.slug+'__dialog">',r+='<div class="dialog-overlay" tabindex="-1" data-a11y-dialog-hide></div>',r+='<dialog class="dialog-content" aria-labelledby="dialogTitle" aria-describedby="dialogContent">',r+='<button data-a11y-dialog-hide class="dialog-close" aria-label="Close this dialog window">&times;</button>',r+=e.titlecardtitle?'<h1 id="dialogTitle">'+e.titlecardtitle+"</h1>":"",r+='<div id="dialogContent">'+e.titlecardcontent+"</div>",r+="</dialog>",r+="</div>",document.body.innerHTML+=r,document.body.style.overflow="hidden";var o=document.getElementById(e.slug+"__dialog"),n=document.getElementById("options.slug"),a=document.getElementById(e.slug+"__about"),s=new window.A11yDialog(o,n);s.dialog;s.show(),s.on("hide",function(e){a.style.display="block"}),s.on("show",function(e){a.style.display="none"}),a.addEventListener("click",function(){s.show()})}document.title=e.title+" | CSIS "+e.program;var i=document.createElement("meta");i.setAttribute("property","og:locale"),i.setAttribute("content","en_US"),document.head.appendChild(i);var l=document.createElement("meta");l.setAttribute("property","og:type"),l.setAttribute("content","article"),document.head.appendChild(l);var c=document.createElement("meta");c.setAttribute("property","og:image:width"),c.setAttribute("content","2000"),document.head.appendChild(c);var u=document.createElement("meta");u.setAttribute("property","og:image:height"),u.setAttribute("content","1333"),document.head.appendChild(u);var p=document.createElement("meta");p.setAttribute("property","twitter:card"),p.setAttribute("content","summary"),document.head.appendChild(p);var d=document.createElement("meta");d.setAttribute("property","og:title"),d.setAttribute("content",e.title+" | CSIS "+e.program),document.head.appendChild(d);var f=document.createElement("meta");f.setAttribute("property","twitter:title"),f.setAttribute("content",e.title+" | CSIS "+e.program),document.head.appendChild(f);var m=document.createElement("meta");m.setAttribute("property","og:description"),m.setAttribute("content",e.description),document.head.appendChild(m);var y=document.createElement("meta");y.setAttribute("property","twitter:description"),y.setAttribute("content",e.description),document.head.appendChild(y);var g=document.createElement("meta");g.setAttribute("property","og:image"),g.setAttribute("content",e.screenshot),document.head.appendChild(g);var h=document.createElement("meta");h.setAttribute("property","twitter:image"),h.setAttribute("content",e.screenshot),document.head.appendChild(h),document.querySelector("#"+e.slug+" header")&&(document.querySelector("#"+e.slug+" .menu").innerText=e.title,document.querySelector("#"+e.slug+" header h1").innerHTML+=e.title,document.querySelector("#"+e.slug+" header a").style.backgroundImage=e.logo?"url("+e.logo+")":"",document.querySelector("#"+e.slug+" header a").href=e.website?e.website:"",document.querySelector("#"+e.slug+" header p").innerText=e.description?e.description:"")}function makeWidgetContent(e,t){var r,o="";switch(e.widgets[t].input){case"toggle":o+='<label for="toggle_'+e.widgets[t].field+'" class="translate"><input type="radio" name="'+e.widgets[t].field+'" id="toggle_'+e.widgets[t].field+'"  value="1" checked>Show</label>',o+='<label for="$toggle_'+e.widgets[t].field+'" class="translate"><input type="radio" name="'+e.widgets[t].field+'" id="toggle_'+e.widgets[t].field+'" value="0" >Hide</label>';break;case"search":o+='<input type="text" id="search_'+e.widgets[t].field+'" placeholder="'+e.widgets[t].instructions+'" size="10" />',o+='<button type="button" id="resetButton" class="translate">Reset</button>';break;case"dropdown":o+='<select id="dropdown_'+e.widgets[t].field+'" placeholder="'+e.widgets[t].instructions+'" multiple=""></select>',r=makeDropdownOptions(e,t);break;case"checkbox":o+="<ul>";var n=e.widgets[t].grouping?e.widgets[t].keys.groupBy("group"):e.widgets[t].keys.groupBy("label");Object.keys(n).forEach(function(r,s){switch(e.widgets[t].type){case"form":var i=e.widgets[t].keys.map(function(e){return e.value}),l={group:n[r],index:s,forms:i,map:e};a=styleKey(l);break;case"color":l={map:e,group:n[r]};a=styleKey(l)}o+='<li><label for="'+r+'"><input class="widget '+e.widgets[t].input+'" type="checkbox" name="'+(e.widgets[t].grouping?r:n[r][0].value)+'" id="'+r+'" '+(n[r][0].selected?"checked":"")+' ><span class="'+a.class+'Key" style="background-image: url(\''+a.svg+'")></span><span class="itemText">'+capitalize(r)+"</span></label></li>"}),o+="</ul>";break;default:var a;o+="<ul>";n=e.widgets[t].grouping?e.widgets[t].keys.groupBy("group"):e.widgets[t].keys.groupBy("label");Object.keys(n).forEach(function(r,s){switch(e.widgets[t].type){case"form":var i=e.widgets[t].keys.map(function(e){return e.value}),l={group:n[r],index:s,forms:i,map:e};a=styleKey(l);break;case"color":l={map:e,group:n[r]};a=styleKey(l)}o+='<li><span class="'+a.class+'Key" style="background-image: url(\''+a.svg+'")></span><span class="itemText">'+capitalize(r)+"</span></li>"}),o+="</ul>"}var s="all"===e.widgets[t].field?"Search":e.widgets[t].field.replace(/_/g," ");return{nodes:o,title:s,options:r}}function makeWidgets(e,t,r){var o=[];t.widgets.forEach(function(n,a){n.hasOwnProperty("id")||(n.id=a);var s=n.reference?parseLegendData(t,e[a].feed.entry,n.type):n.keys;t.widgets[a].keys=s,o.push(makeWidgetContent(t,a)),r+='<section class="widget '+t.widgets[a].field+'"><h3 class="translate">'+o[a].title+"</h3>",r+=o[a].nodes,r+="</section>",document.querySelector("#"+t.slug+" #controls").innerHTML=r;var i=document.querySelectorAll("#"+t.slug+" .itemText");Array.from(i).forEach(function(e){var t=e.offsetHeight,r=window.getComputedStyle(e)["font-size"],o=t/parseInt(r.replace("px",""),10);e.style.transform="translateY("+10*o+"%)"})});var n=new CustomMap(document.querySelector("#"+t.slug+" .map"),t).render();return new Promise(function(e,r){return fetch("https://csis.carto.com/api/v2/sql?api_key="+n.apikey+"&format=geojson&q=SELECT%20*%20FROM%20"+n.table).then(function(e){return e.json()}).then(function(r){var a=n.widgets.find(function(e){return"color"===e.type});if(n.json=[r],a){n.json=[];var s=r.features.groupBy(a.field,"properties");Object.keys(s).sort(function(e,t){return s[t][0].properties[a.field].localeCompare(s[e][0].properties[a.field])}).map(function(e){n.json.push({type:"FeatureCollection",features:s[e]})})}t.widgets.length||(makeGroups(n),document.querySelector("#"+t.slug+" #controls").innerHTML="");if(t.widgets.forEach(function(e,r){var a=document.querySelector("#"+t.slug+" .widget."+t.widgets[r].field);a.querySelector("select")&&o[r].options&&new Choices(a.querySelector("select"),o[r].options),a.querySelector("input[id^='search']")&&a.querySelector("#resetButton").addEventListener("click",function(){handleReset(a,n,r)});var s=Array.from(a.querySelectorAll("select")),i=Array.from(a.querySelectorAll("input[type='checkbox']")),l=Array.from(a.querySelectorAll("input[type='text']:not(.choices__input)")),c=Array.from(a.querySelectorAll("input[type='radio']")),u=s.concat(i).concat(l).concat(c),p=0,d=u.length;u.forEach(function(o){if("text"===o.type?o.addEventListener("keyup",function(){handleChange(n,a,t.widgets,r,d,++p)}):o.addEventListener("change",function(){handleChange(n,a,t.widgets,r,d,++p)}),"createEvent"in document){var s=document.createEvent("HTMLEvents");s.initEvent("change",!1,!0),o.dispatchEvent(s)}else o.fireEvent("onchange");e.map_id=n.id})}),n.translations){var i=Array.from(document.querySelectorAll(".translate")),l=Object.keys(n.translations).sort(function(e,t){return t.length-e.length});i.forEach(function(e,t){l.forEach(function(t){if(Object.keys(n.translations[t]).length){var r=new RegExp("\\b("+RegExp.escape(t)+")","gi");e.innerHTML=e.innerHTML.replace(r,n.translations[t])}})})}e(n)})})}function handleReset(e,t,r){e.querySelector("input[type='text']").value="",t.groups.length&&t.removeGroups(),t.filters[r]=function(){return!0},makeGroups(t)}function handleChange(e,t,r,o,n,a){t.querySelector("select")?Array.from(t.querySelector("select").options):t.querySelector("input[type='text']")?Array.from(t.querySelectorAll("input[type='text']")):Array.from(t.querySelectorAll("input"));var s=t.querySelector("select")?Array.from(t.querySelector("select").options):t.querySelector("input[type='text']")?Array.from(t.querySelectorAll("input[type='text']")):Array.from(t.querySelectorAll("input:checked")),i=Array.from(t.querySelectorAll("input")).map(function(e){return e.name.toLowerCase()}),l=r[o].keys.map(function(e){return e.value.toLowerCase()}),c=i.concat(l),u=Array.from(s).map(function(e){return t.querySelector("input[type='checkbox']")?e.name.toLowerCase():e.value.toLowerCase()});e.filters[r[o].id]="toggle"===r[o].input?function(e){return!e.properties.toggle||!!convertType(u[0])}:"all"===r[o].field?function(e){var t=!0,r=Object.values(e.properties).join("").toLowerCase(),o=Object.values(e.properties).join("").toLowerCase().latinise();return r.indexOf(u[0])<0&&o.indexOf(u[0])<0&&(t=!1),t}:function(e,t){var n=!0,a=r[o].grouping?r[o].grouping:r[o].field;return c.indexOf(e.properties[a].toLowerCase())>-1&&u.indexOf(e.properties[a].toLowerCase())<0&&(n=!1),n},a>=n&&e.removeGroups(),r.length>=o+1&&a>=n&&makeGroups(e)}function makeDropdownOptions(e,t){var r=e.widgets[t].keys.groupBy("group");return{choices:Object.keys(r).map(function(e,t){return{id:t,label:e,disabled:!1,choices:r[e]}}),removeItemButton:!0,maxItemCount:e.widgets[t].maximum,callbackOnCreateTemplates:function(r){var o=this;return{item:function(o,n){var a,s=e.widgets[t].keys.find(function(e){return e.value.toLowerCase()===n.value.toLowerCase()});switch(e.widgets[t].type){case"form":var l=e.widgets[t].keys.map(function(e){return e.value.toLowerCase()});a=styleKey({key:s,index:i,forms:l,map:e});break;case"color":a=styleKey({key:s,map:e})}var c='<div style="border-color:'+s.color+'" class="'+o.item+'" data-item data-id="'+n.id+'" data-value="'+n.value+'" '+(n.active?'aria-selected="true"':"")+" "+(n.disabled?'aria-disabled="true"':"")+'><span class="'+a.class+'Key" style="background-image: url(\''+a.svg+'")></span> '+capitalize(n.label)+'<button style="border-left: 1px solid '+s.color+"; background-image: url('data:image/svg+xml;base64,"+window.btoa(remove)+'\')" type="button" class="choices__button" data-button="" aria-label="Remove item">Remove item</button></div>';return r(c)},choice:function(n,a){var s,l=e.widgets[t].keys.find(function(e){return e.value.toLowerCase()===a.value.toLowerCase()});switch(e.widgets[t].type){case"form":var c=e.widgets[t].keys.map(function(e){return e.value.toLowerCase()});s=styleKey({key:l,index:i,forms:c,map:e});break;case"color":s=styleKey({key:l,map:e})}var u=' <div class="'+n.item+" "+n.itemChoice+" "+(a.disabled?n.itemDisabled:n.itemSelectable)+'" data-select-text="'+o.config.itemSelectText+'" data-choice '+(a.disabled?'data-choice-disabled aria-disabled="true"':"data-choice-selectable")+' data-id="'+a.id+'" data-value="'+a.value+'" '+(a.groupId>0?'role="treeitem"':'role="option"')+'> <span class="'+s.class+'Key" style="background-image: url(\''+s.svg+'")></span> '+capitalize(a.label)+" </div> ";return r(u)}}}}}function parseLanguageData(e){var t={};return e.forEach(function(e){var r;Object.keys(e).forEach(function(o,n){if(o.indexOf("gsx$")>-1){var a=o.replace("gsx$","");"en"===a&&(r=e[o].$t,t[r]={}),a===lang&&(t[r]=e[o].$t)}})}),t}function parseLegendData(e,t,r){var o=createColorScale(t.length),n=[];return t.forEach(function(t,r){var a={};Object.keys(t).forEach(function(s,i){if(s.indexOf("gsx$")>-1&&"label"===s.replace("gsx$","")){var l=t[s].$t.toLowerCase();a.key=l,a.label=t[Object.keys(t)[i+0]].$t,a.value=t[Object.keys(t)[i+1]].$t,a.group=convertType(t[Object.keys(t)[i+2]].$t),a.selected=convertType(t[Object.keys(t)[i+3]].$t);var c=t[Object.keys(t)[i+4]].$t;a.form=t[Object.keys(t)[i+5]].$t,a.color=c||("line"===a.form?defaultColor:o[r]),a.icon=t[Object.keys(t)[i+6]].$t,a.pattern=t[Object.keys(t)[i+7]].$t.split(","),e.translations&&(a.label=e.translations[a.label],a.group=e.translations[a.group]),n.push(a)}})}),n}function parseMetaData(e){var t={};return e.forEach(function(e,r){Object.keys(e).forEach(function(r,o){if(r.indexOf("gsx$")>-1&&"property"===r.replace("gsx$","")){var n=e[r].$t.toLowerCase().replace(/ /g,"");t[n]=t[n]||{},t[n]=convertType(e[Object.keys(e)[o+1]].$t)}})}),t}function stylePoint(e,t,r,o,n){var a,s=L.Icon.extend({options:{iconSize:r.iconsize||[20,20]}});if(n&&e.properties[n.field]){var i=n.keys.map(function(e){return e.value.toLowerCase()}),l=i.indexOf(e.properties[n.field].toLowerCase());a=styleKey({key:c=n.keys.find(function(t){return t.value.toLowerCase()===e.properties[n.field].toLowerCase()}),index:l,forms:i,color:c.color,map:r,feature:e})}else if(o&&e.properties[o.field]){var c;a=styleKey({key:c=o.keys.find(function(t){return t.value.toLowerCase()===e.properties[o.field].toLowerCase()}),color:c.color,map:r,feature:e})}else{a={class:"default",svg:encodeURI("data:image/svg+xml;base64,"+window.btoa('<svg xmlns="http://www.w3.org/2000/svg"><circle cx="6" cy="6" r="5" fill="#38f"/></svg>'))}}var u=new s({iconUrl:a.svg});return L.marker(t,{icon:u})}function makeGeoJsonOptions(e,t,r){function o(t){return e.filters.map(function(e){return e(t)}).every(function(e){return!1!==e})}function n(t,r){handleFeatureEvents(t,r,e)}var a=r?r.keys.reduce(function(e,t){return t.form}):null;if(r&&"line"===a){var s=[],i=[];(i=r.keys.map(function(e){return e.value})).forEach(function(e,t){switch(t){case 0:s.push([null,null]);break;case 1:s.push([null,defaultColor]);break;case 2:s.push(["#000000",null]);break;case 3:s.push(["#ffffff",null]);break;default:s.push([null,null])}});var l={map:e,formKeyWidget:r,colorKeyWidget:t,colors:s,forms:i};return[{filter:o,onEachFeature:n,pointToLayer:e.pointStyle||function(o,n){return stylePoint(o,n,e,t,r)},style:e.nonPointStyle||function(e){return styleNonPoint(e,l,0)}},{filter:o,onEachFeature:n,pointToLayer:e.pointStyle||function(o,n){return stylePoint(o,n,e,t,r)},style:e.nonPointStyle||function(e){return styleNonPoint(e,l,1)}}]}l={map:e,formKeyWidget:r,colorKeyWidget:t};return[{filter:o,onEachFeature:n,pointToLayer:e.pointStyle||function(o,n){return stylePoint(o,n,e,t,r)},style:e.nonPointStyle||function(e){return styleNonPoint(e,l)}}]}function makeGroups(e){var t,r;e.widgets&&(t=e.widgets.find(function(e){return"color"===e.type}),r=e.widgets.find(function(e){return"form"===e.type}));var o=e.geoJsonOptions?e.geoJsonOptions(e,t,r):makeGeoJsonOptions(e,t,r);e.json.forEach(function(r,n){var a;if(t){var s=r.features[0].properties[t.field],i=t.keys.find(function(e){return e.value.toLowerCase()===s.toLowerCase()});a=i?i.color:"#000000"}else a="#000000";var l=r.features.every(function(e){return e.geometry&&"point"===e.geometry.type.toLowerCase()});e.groups.push(new L.MarkerClusterGroup({showCoverageOnHover:!1,zoomToBoundsOnClick:!1,maxClusterRadius:l&&e.clusterdistance?e.clusterdistance:NaN,iconCreateFunction:function(e){return L.divIcon({className:"icon-group",html:'<span class="text" style="border: 2px solid'+a+"; color:"+a+'">'+e.getChildCount()+"</span>"})}})),o.forEach(function(o){t&&(r.features=r.features.sort(function(e,r){return r.properties[t.field].localeCompare(e.properties[t.field])}));var a=L.geoJson(r,_extends({},o));e.groups[n].addLayer(a)}),e.leaflet.addLayer(e.groups[n]),e.groups[n].on("clusterclick",function(t){handleClusterClick(t,e,n)})})}function handleFeatureEvents(e,t,r){var o=r.onEachFeature?r.onEachFeature:{click:function(){handleLayerClick(e,t,r)}};t.on(o);var n="function"==typeof r.formatpopupcontent?r.formatpopupcontent(e,r):formatPopupContent(e,r);t.bindPopup(n)}function formatPopupContent(e,t){var r;r=Object.keys(e.properties).map(function(r){if(e.properties[r])return t.popupheaders.length&&t.popupcontent.length?t.popupheaders.indexOf(r)>-1&&t.popupcontent.indexOf(r)>-1?'<div class="popupHeaderStyle">'+r.toUpperCase().replace(/_/g," ")+'</div><div class="popupEntryStyle">'+e.properties[r]+"</div>":t.popupcontent.indexOf(r)>-1?'<div class="popupEntryStyle">'+e.properties[r]+"</div>":"":t.popupheaders.length?t.popupheaders.indexOf(r)>-1?'<div class="popupHeaderStyle">'+r.toUpperCase().replace(/_/g," ")+'</div><div class="popupEntryStyle">'+e.properties[r]+"</div>":"":t.popupcontent.length?t.popupcontent.indexOf(r)>-1?'<div class="popupEntryStyle">'+e.properties[r]+"</div>":"":'<div class="popupHeaderStyle">'+r.toUpperCase().replace(/_/g," ")+'</div><div class="popupEntryStyle">'+e.properties[r]+"</div>"}).filter(function(e){return e}).join("");var o=e.properties.hyperlink||e.properties.link,n=o&&o.trim()?'<div class="separator"></div><div class="hyperlink popupEntryStyle"><a class="translate" href='+o.trim()+' target="_blank">'+t.externalLinkText+"</a>"+externalLink+"</div>":"";(r+=n,lang)&&Object.keys(t.translations).sort(function(e,t){return t.length-e.length}).forEach(function(e){var o=new RegExp("\\b("+RegExp.escape(e)+")","gi");r=r.replace(o,t.translations[e])});return r}function handleLayerClick(e,t,r){var o=!1;t._preSpiderfyLatlng||(Object.keys(r.leaflet._layers).forEach(function(e,t){r.leaflet._layers[e].unspiderfy&&r.leaflet._layers[e].unspiderfy()}),t.__parent&&(Object.values(t.__parent._group._featureGroup._layers).forEach(function(e){e._group&&e._group._spiderfied&&(o=!0)}),Array.from(document.querySelectorAll("div.leaflet-marker-icon")).forEach(function(e){return e.style.opacity=o?.33:1}),Array.from(document.querySelectorAll("img.leaflet-marker-icon")).forEach(function(e){return e.style.opacity=o?.33:1})))}function handleClusterClick(e,t,r){t.leaflet._layers[e.layer._leaflet_id].spiderfy(),Object.keys(t.leaflet._layers).forEach(function(r,o){parseInt(r,10)!==e.layer._leaflet_id&&t.leaflet._layers[r].unspiderfy&&t.leaflet._layers[r].unspiderfy()});var o=!1;Object.values(t.groups[r]._featureGroup._layers).forEach(function(e){e._group&&e._group._spiderfied&&(o=!0)}),Array.from(document.querySelectorAll("div.leaflet-marker-icon")).forEach(function(e){return e.style.opacity=o?.33:1}),Array.from(document.querySelectorAll("img.leaflet-marker-icon")).forEach(function(e){return e.style.opacity=o?.33:1}),Object.values(t.groups[r]._featureGroup._layers).filter(function(t){e.layer.getAllChildMarkers().map(function(e){return e.getElement()}).filter(function(e){return e}).forEach(function(e){return e.style.opacity=1})})}function styleNonPoint(e,t,r){t.leaflet;var o=t.formKeyWidget,n=t.colorKeyWidget,a=t.colors,s=t.forms,i=n?n.keys.find(function(t){return t.value.toLowerCase()===e.properties[n.field].toLowerCase()}):null,l=o?o.keys.find(function(t){return t.value.toLowerCase()===e.properties[o.field].toLowerCase()}):null;if(!i&&!l)return{opacity:0,fillOpacity:0};var c=i?i.color:l?l.color:null,u=o?o.keys.reduce(function(e,t){return t.form}):null,p=n?n.keys.reduce(function(e,t){return t.form}):null;if(!(s&&"line"===u||s&&"line"===p)){if("line"===u||"line"===p)return{color:c,weight:2,lineCap:"square",dashArray:"3,7"};if(i&&"pattern"===i.form){var d;switch(!0){case i.pattern[0].indexOf("stripe")>-1:var f={weight:3,spaceWeight:3,color:i.pattern[1],spaceColor:i.pattern[i.pattern.length-1],spaceOpacity:1,angle:45};d=new L.StripePattern(f);break;case i.pattern[0].indexOf("dot")>-1:var m={x:4,y:4,radius:2,fill:!0,stroke:!1,fillColor:i.pattern[i.pattern.length-1],fillOpacity:1},y=new L.PatternCircle(m);f={width:8,height:8};(d=new L.Pattern(f)).addShape(y)}return d.addTo(t.map.leaflet),{fillPattern:d||null,fillColor:c,color:defaultColor,fillOpacity:.7,opacity:.5,weight:2,lineCap:"square"}}var g,h,v;switch(!0){case e.geometry.type.toLowerCase().indexOf("line")>-1:g=chroma(c).brighten().hex(),v=1,h=4;break;case e.geometry.type.toLowerCase().indexOf("polygon")>-1:g=defaultColor,v=.5,h=2}return{fillPattern:d,fillColor:c,color:g,fillOpacity:.7,opacity:v,weight:h}}var w=s.indexOf(e.properties[o.field]);return w>-1?{color:a[w][r]?a[w][r]:c,weight:lineWeights[w][r],lineCap:"square",dashArray:lineDashArrays[w]?lineDashArrays[w][r]:null}:void 0}function styleKey(e){var t,r,o=e.map,n=e.feature,a=e.group,s=e.key,i=e.index,l=e.forms;s=a?a[0]:s;switch((d=o.widgets.find(function(e){return"color"===e.type}))&&d.keys&&n&&(f=d.keys.find(function(e){return e.value.toLowerCase()===n.properties[d.field].toLowerCase()})),f&&(t=f.color),s.color=a&&a.every(function(e){return e.color})?chroma.average(a.map(function(e){return e.color})):s.color,s.form){case"line":if(t=s.color?s.color:color,l){switch(i){case 0:r=[t||chroma(defaultColor).darken(),t||chroma(defaultColor).darken()];break;case 1:r=[t||chroma(defaultColor).darken(),"#ffffff"];break;case 2:r=["#000000",t||defaultColor];break;case 3:r=["#ffffff",t||chroma(defaultColor).darken()];break;default:r=[t||chroma(defaultColor).darken(),t||chroma(defaultColor).darken()]}m="<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 12'><line x1='0' x2='48' y1='50%' y2='50%' stroke='"+r[0]+"' stroke-width='"+lineWeights[i][0]+"' stroke-linecap='square' stroke-dasharray='"+(4===i?"18,12":lineDashArrays[i][0])+"'/><line x1='0' x2='48' y1='50%' y2='50%' stroke='"+r[1]+"' stroke-width='"+lineWeights[i][1]+"' stroke-linecap='square' stroke-dasharray='"+(4===i?"18,12":lineDashArrays[i][1])+"'/></svg>"}else m="<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 12'><line x1='0' x2='48' y1='50%' y2='50%' stroke='"+t+"' stroke-width='3' stroke-linecap='square' stroke-dasharray='3,7'/></svg>";return{svg:"data:image/svg+xml;base64,"+window.btoa(m),class:"line"};case"icon":if(s.icon){s.value.replace(/ /g,"-");load(s.icon,document.querySelector(".hidden"));var c=document.querySelector(".hidden").innerHTML;d&&t&&(c=(c=c.replace(/((\bfill="#)(([0-a-fA-F]{2}){3}|([0-9a-fA-F]){3})")/gi,"")).replace(/(<circle |<rectangle |<ellipse |<polygon |<path )/g,function(e,r,o,n){return e.replace(e,e+'fill="'+t+'" ')})),m="data:image/svg+xml;base64,"+window.btoa(c)}else m="data:image/svg+xml;base64,"+window.btoa('<svg xmlns="http://www.w3.org/2000/svg"><circle cx="6" cy="6" r="5" fill="'+(t||s.color)+'"/></svg>');return{svg:m,class:s.icon?"icon":"color"};case"pattern":switch(t=s.color,!0){case s.pattern[0].indexOf("stripe")>-1:var u=s.pattern[1],p=s.pattern[s.pattern.length-1];m="data:image/svg+xml;base64,"+window.btoa('<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12"><polygon points="5.73 0 4.67 0 0 4.66 0 5.71 5.73 0" fill="'+p+'"/><polygon points="2.28 0 1.22 0 0 1.22 0 2.27 2.28 0" fill="'+u+'"/><polygon points="8.85 0 7.79 0 0 7.77 0 8.82 8.85 0" fill="'+u+'"/><polygon points="12 0 11.24 0 0 11.2 0 12 0.26 12 12 0.3 12 0" fill="'+p+'"/><polygon points="12 10.12 12 9.06 9.05 12 10.11 12 12 10.12" fill="'+u+'"/><polygon points="12 3.52 12 2.46 2.43 12 3.49 12 12 3.52" fill="'+u+'"/><polygon points="12 6.96 12 5.9 5.88 12 6.94 12 12 6.96" fill="'+p+'"/></svg>');break;case s.pattern[0].indexOf("dot")>-1:m="data:image/svg+xml;base64,"+window.btoa('<svg xmlns="http://www.w3.org/2000/svg" width="13.06" height="15.1" viewBox="0 0 12 12"><title>stripes</title><path d="M5.49,1A1.16,1.16,0,1,1,4.33-.16,1.16,1.16,0,0,1,5.49,1ZM4.33,3.77A1.16,1.16,0,1,0,5.49,4.93,1.15,1.15,0,0,0,4.33,3.77Zm0,3.93A1.16,1.16,0,1,0,5.49,8.86,1.15,1.15,0,0,0,4.33,7.7Zm0,3.93a1.16,1.16,0,1,0,1.16,1.16A1.15,1.15,0,0,0,4.33,11.63ZM11.5-.16A1.16,1.16,0,1,0,12.66,1,1.16,1.16,0,0,0,11.5-.16Zm0,3.93a1.16,1.16,0,1,0,1.16,1.16A1.16,1.16,0,0,0,11.5,3.77Zm0,3.93a1.16,1.16,0,1,0,1.16,1.16A1.16,1.16,0,0,0,11.5,7.7Zm0,3.93a1.16,1.16,0,1,0,1.16,1.16A1.16,1.16,0,0,0,11.5,11.63ZM7.92-1.16A1.16,1.16,0,0,0,6.76,0,1.16,1.16,0,0,0,7.92,1.16,1.16,1.16,0,0,0,9.07,0,1.16,1.16,0,0,0,7.92-1.16Zm0,3.93A1.16,1.16,0,1,0,9.07,3.93,1.16,1.16,0,0,0,7.92,2.77Zm0,3.93A1.16,1.16,0,1,0,9.07,7.86,1.16,1.16,0,0,0,7.92,6.7Zm0,3.93a1.16,1.16,0,1,0,1.15,1.16A1.16,1.16,0,0,0,7.92,10.63ZM.75-1.16A1.16,1.16,0,0,0-.41,0,1.16,1.16,0,0,0,.75,1.16,1.16,1.16,0,0,0,1.91,0,1.16,1.16,0,0,0,.75-1.16Zm0,3.93A1.16,1.16,0,1,0,1.91,3.93,1.16,1.16,0,0,0,.75,2.77Zm0,3.93A1.16,1.16,0,0,0-.41,7.86,1.15,1.15,0,0,0,.75,9,1.15,1.15,0,0,0,1.91,7.86,1.16,1.16,0,0,0,.75,6.7Zm0,3.93a1.16,1.16,0,1,0,1.16,1.16A1.16,1.16,0,0,0,.75,10.63Z" transform="translate(0.7 2)" fill="'+p+'"/></svg>');break;default:m="data:image/svg+xml;base64,"+window.btoa('<svg xmlns="http://www.w3.org/2000/svg"><circle cx="6" cy="6" r="5" fill="'+t+'"/></svg>')}return{svg:m,class:s.pattern?"pattern":"color"};case"shape":if(n){var d,f=(d=o.widgets.find(function(e){return"color"===e.type})).keys.find(function(e){return e.value.toLowerCase()===n.properties[d.field].toLowerCase()});t=f?f.color:color||null}switch(i){case 0:m='<svg xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="rainbow"  y1="4.5" x2="9" y2="4.5" gradientUnits="userSpaceOnUse" gradientTransform="translate(4.5 -4.5) rotate(135)"><stop offset="0" stop-color="#7f3c8d"/><stop offset="0.325" stop-color="#e73f74"/><stop offset="0.5" stop-color="#f2b701"/><stop offset="0.675" stop-color="#11a579"/><stop offset="1" stop-color="#3969ac"/></linearGradient></defs><rect x="3.25" y="1.75" width="9" height="9" transform="translate(4.5 -4.5) rotate(45)" '+(t?'paint-order="stroke" stroke="#ffffff"':"")+' fill="'+(t||"url(#rainbow)")+'" /></svg>';break;case 1:m='<svg xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="rainbow" y1="5" x2="10" y2="5" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#3969ac"/><stop offset="0.25" stop-color="#11a579"/><stop offset="0.5" stop-color="#f2b701"/><stop offset="0.75" stop-color="#e73f74"/><stop offset="1" stop-color="#7f3c8d"/></linearGradient></defs><rect width="10" height="10" '+(t?'stroke="#ffffff"':"")+' fill="'+(t||"url(#rainbow)")+'"/></svg>';break;case 2:m='<svg xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="rainbow" y1="5" x2="10" y2="5" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#3969ac"/><stop offset="0.325" stop-color="#11a579"/><stop offset="0.5" stop-color="#f2b701"/><stop offset="0.675" stop-color="#e73f74"/><stop offset="1" stop-color="#7f3c8d"/></linearGradient></defs><polygon points="6 10.39 0 10.39 3 5.2 6 0 9 5.2 12 10.39 6 10.39" '+(t?'paint-order="stroke" stroke="#ffffff"':"")+' fill="'+(t||"url(#rainbow)")+'" /></svg>';break;default:m='<svg xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="rainbow" y1="5" x2="10" y2="5" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#3969ac"/><stop offset="0.25" stop-color="#11a579"/><stop offset="0.5" stop-color="#f2b701"/><stop offset="0.75" stop-color="#e73f74"/><stop offset="1" stop-color="#7f3c8d"/></linearGradient></defs><circle cx="6" cy="6" r="5" '+(t?'stroke="#ffffff"':"")+' fill="'+(t||"url(#rainbow)")+'"/></svg>'}return{svg:"data:image/svg+xml;base64,"+window.btoa(m),class:"shape"};default:var m;return t=s.color,{svg:m="data:image/svg+xml;base64,"+window.btoa('<svg xmlns="http://www.w3.org/2000/svg"><circle cx="6" cy="6" r="5" fill="'+t+'"/></svg>'),class:"color"}}}function createColorScale(e,t){for(var r=chroma.cubehelix().hue(.5).lightness([.4,.6]).scale().colors(2*e),o=chroma.cubehelix().hue(1).gamma(.5).scale().colors(2*e).reverse(),n=[],a=0;a<e;a++){var s=a%2==0?r[2*a]:o[2*a];s=chroma(s).saturate().hex(),n.push(s)}return n}var lineWeights=[[3,3],[5,2],[4,3.5],[7,3],[4,4]],lineDashArrays=[["6,9","6,9"],[null,null],[null,"6,12"],[null,null],[null,null]],externalLink='<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15"><path d="M7.49,0V1.67H1.68V13.32H13.32V7.52H15v5.72a1.76,1.76,0,0,1-.42,1.19,1.64,1.64,0,0,1-1.13.56H1.74a1.67,1.67,0,0,1-1.16-.41A1.61,1.61,0,0,1,0,13.48v-.27C0,9.4,0,5.6,0,1.8A1.83,1.83,0,0,1,.58.4a1.53,1.53,0,0,1,1-.39h6Z" transform="translate(0 0)"/><path d="M9.17,1.67V0H15V5.84H13.34v-3h0c-.05.05-.11.1-.16.16l-.45.46-1.3,1.29-.84.84-.89.9-.88.87-.89.9c-.28.29-.57.57-.86.86L6.16,10l-.88.87a1.83,1.83,0,0,1-.13.16L4,9.86l0,0L5.36,8.47l.95-1,.75-.75,1-1L8.87,5l1-.94.85-.86.92-.91.56-.58Z" transform="translate(0 0)"/></svg>',remove='<svg viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><g fill="#000" fill-rule="evenodd"><path d="M2.592.044l18.364 18.364-2.548 2.548L.044 2.592z"/><path d="M0 18.364L18.364 0l2.548 2.548L2.548 20.912z"/></g></svg>';function convertType(e){var t=Number(e);return isNaN(t)?"undefined"===e.toLowerCase()?void 0:"null"===e.toLowerCase()?null:"true"===e.toLowerCase()||"false"!==e.toLowerCase()&&e:t}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e};function capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}function load(e,t){var r=new XMLHttpRequest;r.open("GET",e,!1),r.send(null),t.innerHTML=r.responseText}Array.prototype.groupBy=function(e,t){return t?this.reduce(function(r,o){var n=o[t][e];return r[n]=r[n]||[],r[n].push(o),r},{}):this.reduce(function(t,r){var o=r[e];return t[o]=t[o]||[],t[o].push(r),t},{})},RegExp.escape=function(e){return e.replace(/[\/\\^$*+?.()|[\]{}]/g,"\\$&")};
